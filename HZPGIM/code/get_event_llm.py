# -*- coding: utf-8 -*-
from zhipuai import ZhipuAI
import json
from tqdm import tqdm
client = ZhipuAI(api_key="1d47eabd48f537cb361452dc3669893d.meA60atHPB44tsPs") # 填写您自己的APIKey

sample_input = """
[
    "假冒造假1_segment_0_00_7_83",
    {
      "sentences": [
        "快回家看看你是否以下两款产品呢？国家药监局分别在5月8号6月11号公布了两批次假冒化妆品的公告。 这2款假冒造假品扔掉! 化妆品质量管理 G",
        "一款是标识着生产企业为广州市汉隆化妆品有限公司，且标识生产日期为2017年3月10号之后的化妆品均为假冒化妆品。 两批次假冒化妆品的通告 这2款假冒造假品扔掉! 化妆品质量管理 Gi",
        "这款是目前在市场上销售者标志着生产企业为。 这2款假冒造假品扔掉! 化妆品质量管理 上",
        "广州市美意化妆品有限公司的瑞果茶籽宝宝山茶子植萃茶兴霜为假冒化妆品，该企业声称从未生产销售过相关产品。 经查,目前市场上销售的标识生产企业为广州市美意化妆品有限公司的“瑞果茶籽宝宝山茶 针对化妆品风险监测、监督检查发现的问题, 国家药品监督管理局责成广东省药品监督 为保障公众用妆安全,净化化妆品市场,依据《化妆品监督管理条例》等法规规定,国 各级负责药品监督管理的部门应当加大对《化妆品监督管理条例》的宣贯力度,督促化 国家药监局关于停止销售标识名称为“瑞 这2款假冒造假品扔掉! 标识着生产企业为 停止销售上述假冒化妆品,深直深究其进货渠道, National Medical Products Administration 国家药品监督管理局 假冒化妆品的通告(20 发现违法行为的,依法严肃查处: 化妆品质量管理 规范经营行为, 特此通告, 涉嫌犯 上 .",
        "以上两款假冒化妆品具有任何的质量保证，家里如果有的宝宝们赶快要扔掉了。 这2款假冒造假品扔掉! 化妆品质量管理 Gi",
        "这2款假冒造假品扔掉! 化妆品质量管理 Gi"
      ],
      "ann_valid_mspans": [
        "5月8号",
        "6月11号",
        "国家药监局",
        "2017年3月10号",
        "广州市汉隆化妆品有限公司",
        "2款",
        "瑞果茶籽宝宝山茶子植萃茶兴霜",
        "广州市美意化妆品有限公司",
        "国家药品监督管理局",
        "广东省药品监督"
      ],
      "ann_valid_dranges": [
        [
          0,
          24,
          28
        ],
        [
          0,
          28,
          33
        ],
        [
          0,
          16,
          21
        ],
        [
          3,
          213,
          218
        ],
        [
          1,
          33,
          43
        ],
        [
          1,
          12,
          24
        ],
        [
          0,
          50,
          52
        ],
        [
          1,
          71,
          73
        ],
        [
          2,
          25,
          27
        ],
        [
          3,
          233,
          235
        ],
        [
          4,
          41,
          43
        ],
        [
          5,
          6,
          8
        ],
        [
          3,
          16,
          30
        ],
        [
          3,
          3,
          15
        ],
        [
          3,
          73,
          85
        ],
        [
          3,
          116,
          125
        ],
        [
          3,
          317,
          326
        ],
        [
          3,
          127,
          134
        ]
      ],
      "ann_mspan2dranges": {
        "5月8号": [
          [
            0,
            24,
            28
          ]
        ],
        "6月11号": [
          [
            0,
            28,
            33
          ]
        ],
        "国家药监局": [
          [
            0,
            16,
            21
          ],
          [
            3,
            213,
            218
          ]
        ],
        "2017年3月10号": [
          [
            1,
            33,
            43
          ]
        ],
        "广州市汉隆化妆品有限公司": [
          [
            1,
            12,
            24
          ]
        ],
        "2款": [
          [
            0,
            50,
            52
          ],
          [
            1,
            71,
            73
          ],
          [
            2,
            25,
            27
          ],
          [
            3,
            233,
            235
          ],
          [
            4,
            41,
            43
          ],
          [
            5,
            6,
            8
          ]
        ],
        "瑞果茶籽宝宝山茶子植萃茶兴霜": [
          [
            3,
            16,
            30
          ]
        ],
        "广州市美意化妆品有限公司": [
          [
            3,
            3,
            15
          ],
          [
            3,
            73,
            85
          ]
        ],
        "国家药品监督管理局": [
          [
            3,
            116,
            125
          ],
          [
            3,
            317,
            326
          ]
        ],
        "广东省药品监督": [
          [
            3,
            127,
            134
          ]
        ]
      },
      "ann_mspan2guess_field": {
        "5月8号": "TIME",
        "6月11号": "TIME",
        "国家药监局": "REGULATORY_ORG",
        "2017年3月10号": "TIME",
        "广州市汉隆化妆品有限公司": "INVOLVED_COMPANY",
        "2款": "COUNTERFEIT_QUANTITY",
        "瑞果茶籽宝宝山茶子植萃茶兴霜": "PRODUCT_NAME",
        "广州市美意化妆品有限公司": "INVOLVED_COMPANY",
        "国家药品监督管理局": "REGULATORY_ORG",
        "广东省药品监督": "REGULATORY_ORG"
      },
      "recguid_eventname_eventdict_list": [
        [
          0,
          "Counterfeiting",
          {
            "TIME": "5月8号",
            "LOCATION": null,
            "AMOUNT": null,
            "REGULATORY_ORG": "国家药监局",
            "PRODUCT_NAME": null,
            "PRODUCT_BRAND": null,
            "INVOLVED_COMPANY": null,
            "COUNTERFEIT_QUANTITY": "2款"
          }
        ],
        [
          1,
          "Counterfeiting",
          {
            "TIME": "6月11号",
            "LOCATION": null,
            "AMOUNT": null,
            "REGULATORY_ORG": "国家药监局",
            "PRODUCT_NAME": null,
            "PRODUCT_BRAND": null,
            "INVOLVED_COMPANY": null,
            "COUNTERFEIT_QUANTITY": "2款"
          }
        ],
        [
          2,
          "Counterfeiting",
          {
            "TIME": "2017年3月10号",
            "LOCATION": null,
            "AMOUNT": null,
            "REGULATORY_ORG": null,
            "PRODUCT_NAME": null,
            "PRODUCT_BRAND": null,
            "INVOLVED_COMPANY": "广州市汉隆化妆品有限公司",
            "COUNTERFEIT_QUANTITY": null
          }
        ],
        [
          3,
          "Counterfeiting",
          {
            "TIME": null,
            "LOCATION": null,
            "AMOUNT": null,
            "REGULATORY_ORG": "国家药品监督管理局",
            "PRODUCT_NAME": "瑞果茶籽宝宝山茶子植萃茶兴霜",
            "PRODUCT_BRAND": null,
            "INVOLVED_COMPANY": "广州市美意化妆品有限公司",
            "COUNTERFEIT_QUANTITY": null
          }
        ]
      ]
    }
  ],
"""

sample_output = """
"recguid_eventname_eventdict_list": [
        [
          0,
          "Counterfeiting",
          {
            "TIME": "5月8号",
            "LOCATION": null,
            "AMOUNT": null,
            "REGULATORY_ORG": "国家药监局",
            "PRODUCT_NAME": null,
            "PRODUCT_BRAND": null,
            "INVOLVED_COMPANY": null,
            "COUNTERFEIT_QUANTITY": "2款"
          }
        ],
        [
          1,
          "Counterfeiting",
          {
            "TIME": "6月11号",
            "LOCATION": null,
            "AMOUNT": null,
            "REGULATORY_ORG": "国家药监局",
            "PRODUCT_NAME": null,
            "PRODUCT_BRAND": null,
            "INVOLVED_COMPANY": null,
            "COUNTERFEIT_QUANTITY": "2款"
          }
        ],
        [
          2,
          "Counterfeiting",
          {
            "TIME": "2017年3月10号",
            "LOCATION": null,
            "AMOUNT": null,
            "REGULATORY_ORG": null,
            "PRODUCT_NAME": null,
            "PRODUCT_BRAND": null,
            "INVOLVED_COMPANY": "广州市汉隆化妆品有限公司",
            "COUNTERFEIT_QUANTITY": null
          }
        ],
        [
          3,
          "Counterfeiting",
          {
            "TIME": null,
            "LOCATION": null,
            "AMOUNT": null,
            "REGULATORY_ORG": "国家药品监督管理局",
            "PRODUCT_NAME": "瑞果茶籽宝宝山茶子植萃茶兴霜",
            "PRODUCT_BRAND": null,
            "INVOLVED_COMPANY": "广州市美意化妆品有限公司",
            "COUNTERFEIT_QUANTITY": null
          }
        ]
      ]
"""
#
# text = """
# [
#     "假冒造假74_segment_0_00_9_92",
#     {
#       "sentences": [
#         "价格低的反常退货率却居高不下，种种可疑迹象让办民警提高了警惕，请给我出。 价格便宜,经过鉴定是假的 我还是觉得有问题· 这个香水不是正品 专柜买的不一样 看着不是正品 CCTV 13501 550002161 550003224 773043070 557011936 731322506 430622830 YT4589046 市阿 con 金定假货 质量问题 查理娟 不喜欢 712501 闻12501 119137 有味道 黃瑞娟 瑞娟新 董瑞娟 瑞娟 假货 其他 吉量 卡粉 报质 顺丰 童瑞女 中通 拒收 圆通 理 董瑞 瑞 货 墨 牛 蓋 整 问 SF 董 > 号 是页 白 女 售 库 ,",
#         "研判警方怀疑，这家店铺可能涉嫌大规模售价，经营部调查中。 同创化妆品专营店 打量视频 CCTV com 店铺详情 2.4万人关注 证照信息 店铺星级 用户评价 物流履约 质 9.47分 9.99分 创美妆专营店 9.01分 已关注 新闻 高 服务 牌 13 TC 25 C",
#         "警方发现，同创化妆品专营店营业执照上显示的注册地在安徽合肥，但是。 专柜正品、质量保证 l)、汤姆福特 2019-12-04 (GIOPCI6 )、阿玛尼 、香奈儿 安徽合肥市 店铺二维码 (Kiehl's) 开店时间 销售品牌 店铺简介 所在地区 (Chanel) FORD) 吉量 CCTV 科颜氏 (TOM 报质 高清 新闻 CCT ON oo 13 司 215",
#         "实际的发货地却是湖南长沙激情转转高邮警方。 CCTV 吉量 量 服质 厚m 闻 13 温 新 天",
#         "才在湖南长沙找到了这家网店发货仓库除了成品之外，办民警在这个仓库还找到了大量来不及包。 CCTV 吉量 服质 com 频 量 视 清 闻 温 13 新",
#         "中的半成品，以及印有各种品牌logo的包装袋，包装盒和中文标签。 打量视频 CCTV 店 73NAHS 新闻 亮m SHALSTANE 13 恩 215",
#         "随即，高邮警方对于涉案的就。 打量视频 Dior CHANEL CCTV 屋 新闻 com /13 清 牌 I 2装",
#         "有个品牌的化妆品采样后。 打量视频 CCTV Vishes 新闻 厚m Bes 13 温 215",
#         "送往品牌方进行了鉴定。 打量视频 CCTV 屋 Vishes 新闻 com 13 清 Bes 厚 esg 015",
#         "我们对他这个所有查到的物品进行了鉴定啊品牌方给我们的统一答复，全部都是假货。 我们对所有查到的物品进行了 江苏省高邮市公安局武安派出所副所长陈健 打量视频 Companion 3,5q-NET WT.0.12 OZ CCTV co COULEUR COUTURE HYDFATING LIP BALM COLORAWAKENING AfrlenQ BAUME A LEVRES ROUGE SOIN FONDANT REHAUSSEUR DE FEEL GOOD Dior HYDRATANT 吉量 服质 : 新闻 家 520 13 温 001 新 L",
#         "在湖南长沙高邮警方将同创化妆品专营。 CCTV com 13 专量哥 报质 新闻 物 童 视 打 清 湿度 时间 品度",
#         "电的实际控制人高某某和徐某华抓获。 CCTV com 吉量: 报质 新闻 星 /13 视 温度 时间 品度",
#         "这两个人同在经营同创的同时，还有另外还有三家，呃呃呃，网店同样也是销售假冒的迪奥香奈儿等大牌品牌的香水。 T苏省京邮市公安居治安士刚可中队长酒些的 这两个人在经营同创的同时 指 CCTV 吉量 服质 高清 闻 13 新",
#         "口红是个网店的小网上销售额1000。 “同创化妆品专营店”涉嫌销售假冒注册商标的商品案 迪奥香奈儿等(知名)品牌的香 江苏省高邮市公安局治安大队副中队长谭紫钧 打量视频 高青(逮捕、负责进货)、习华 CCTV com 四个网店,2020年3月以来真实销售趣 (逮捕、负责网点运营、销售) 13 青团伙结构图 吉量: 口红、香水供货商 s.yonc 服质 运曹人员构成 1899万余元 ——高 闻 2n m 015 新 W h 日 C",
#         "800余万元非法获利600余万元。 四个网店网上销售额是1800余万 江苏省高邮市公安局治安大队副中队长谭紫钧 打量视频 吉量: CCTV 服质 高清 /13 闻 新",
#         "采访中，记者了解到，2020年三月至2020年八月案发前五个月的时间。 打量视频 CCTV 报质 告量 107200 高清 新闻 13 n",
#         "包括同创化妆品专营店在内，四家网店通过售假，非法获利达600万元以上，其销售的规模和能量可见一斑。 自动求和·自动简选·排序·格式·行和列·工作表、查找选择 CCTV com 同创化妆品10211086 1巴育郭楞蒙古 克拉玛依市迪奥(D1c新 专柜正品】Dior迪奥口红 吉量福 柜正品】香奈儿/Chan 车 柜正品】Dlor迪奥口红 柜正品】香奈儿/Cha SF1074557757474 服质 品】Dlor迪奥口红 合并居中·自动换行 新.闻 贸言专柜正品】 香奈儿(C四川 迪贝(D1<河北 DCLL 香奈儿(C甘肃 迪奥(DIc广东 香奈儿(C广东 轴国(D1心广东 香奈儿(C河北 迪奥(DI<安国 248京东快递 538京东快递 JDVB0457802 243京东快递 238京东快递 218京东快递 258京东快递 248 京东快递 358韵达快递 248顺丰快递 228京东快过 图田 石期 116京东快递 298韵达快递 S WPS表格 奈儿(C山东 奈儿(C四川 奈儿(C河北 157【顺丰 5京东快递 10074578 0厂家自送 (D1陕西 (D1c陕西 (D1(陕西 248京东 正品】DI 京东递 1口红丝绒 (D1e上海 柜正品】 (D1天津 迪奥口组 lor造奥 (C四川 顺丰快递 ((甘肃 清 1007457 (C山东 1达州市 正品】 23 水花洋乱 节礼物】 油奥口红 口红烈焰 JDVE04 615188 271069 100745 办公空司 香奈儿 迪奥口 儿/Ch 074578 41【 DIor香 丰留言 044210 广元市 北京市 化妆品 西安市 天津市 10211 816983 丰快递 丰送达 南京市 奥口红 nel口 临沂市 鑫 1882 C广东 C江苏 兰州 华节市 奇阳市 品】证 儿/C 10074 4578 天水 JDVBO 留言 云停 1021 AA 18 86 ir 品6 C贵 : 迪图 1578 奈儿 4820 E正品 儿/ 加蓝 2% 店铺 JDVB 迪奥 节礼 12-15 正品 日期 广州 JDVE 庆市 安市 100 1口 快递 四川 JDV 山市 578 留 457 T52 女品 口红 (D1 品 保 646 言 达 宁 632 物】 L/C 酒 49 079 208 258 JD 875 148 40 四) 20 81 儿 39 358 L/ 157 奥 齐宁 95 63 香 465 09 0 南, 扫 心 45 装 x 国 59 柜 四 19 79 10 9 递 6 64 学 26 35 阅 市 57 口 16 词 德 康 o 5正 38 15 2型 4N 48 TI 东 百 12 74 E 1 5il 专 F JI 主 考 I 31 听 34 【 28 77 TE C 】 76 TD n",
#         "举办民警介绍，事实上。 CCTV com 告量德 报质 POLIC 平 新闻 :量 打 13 ( 7 2",
#         "售假团伙只需要简单加工。 CCTV com 吉量: POlICE 报质 新闻 号 童 +l 13 可",
#         "就能轻松获取暴利。 打量视频 CCTV com POLICE 告量 服质 新闻 13 北 (",
#         "这些涉案物品都是我们对嫌疑人的仓库进行搜查，扣押到的相关的涉案物品，最初这个嫌疑人是通过这个上线仅过了没有这种。 这些涉案物品都是我们 打量视频 CCTV com 青量摄 报质 新闻 13 828",
#         "外包装的这种口红，然后他通过其他的途径购买到了相应的这个外包装盒。 江苏省高邮市公安局治安大队副中队长谭紫钧 进购了没有外包装的口红 打量视频 CCTV com 报质 吉量 13 品 107",
#         "包括这个。 江苏省高邮市公安局治安大队副中队长谭紫钧 购买到了相应的外包装盒 CCTV 告量岛 琼 报服质 新闻 cOm 劳 + 清 13 此",
#         "中文标题，作文标题，然后她。 江苏省高邮市公安局治安大队副中队长谭紫钧 包括这个中文标贴 CCTV 吉量福 G 报质 混行 新闻 劳 + 13 2",
#         "进行一个简单的二次组装，组装之后，他把这个相应的膏体放到这个外包装盒里面，然后贴上相应的这个中文标。 江苏省高邮市公安局治安大队副中队长谭紫钧 包括这个中文标贴 CCTV 告量哥 店 服质 com 新闻 童 扭 13",
#         "100块钱。 江苏省高邮市公安局治安大队副中队长谭紫钧 然后贴上相应的中文标签 CCTV com 吉量温 报质 新闻 POL 、星 +1 13",
#         "像他一个这个产品已经可以销售的产品，它的成本价在30元左右。 江苏省高邮市公安局治安大队副中队长谭紫钧 然后贴上相应的中文标签 打量视频 CCTV com 101. POLIC 报质 吉量 新闻 13",
#         "但是他在网上的销售价在250块钱左右，也就说它中间差价大概是七倍，七位的差价啊，这还是比较暴力。 江苏省高邮市公安局治安大队副中队长 成本价在30元左右 打量视频 CCTV com 谭紫钧。 告量岛 POLICE 报质 新闻 13 H C",
#         ""
#       ],
#       "ann_valid_mspans": [
#         "同创化妆品专营店",
#         "创美妆专营店",
#         "安徽合肥",
#         "汤姆福特",
#         "阿玛尼",
#         "香奈儿",
#         "科颜氏",
#         "湖南长沙",
#         "高邮警方",
#         "Dior",
#         "CHANEL",
#         "CCTV co COULEUR COUTURE HYDFATING LIP BALM",
#         "COLORAWAKENING AfrlenQ BAUME A LEVRES ROUGE SOIN FONDANT",
#         "REHAUSSEUR DE FEEL GOOD Dior HYDRATANT",
#         "吉量",
#         "江苏省高邮市公安局武安派出所",
#         "同创化妆品专营",
#         "高某某",
#         "徐某华",
#         "迪奥",
#         "同创",
#         "T苏省京邮市公安居治安士刚可中队长",
#         "800余万元",
#         "600余万元",
#         "1800余万",
#         "江苏省高邮市公安局治安大队",
#         "江苏省高邮市公安局治安大队",
#         "谭紫钧",
#         "2020年三月至2020年八月",
#         "600万元",
#         "迪奥(D1c新 专柜正品】Dior迪奥口红",
#         "香奈儿/Chan 车 柜正品】",
#         "Dlor迪奥口红",
#         "香奈儿/Cha SF1074557757474",
#         "Dior迪奥口红",
#         "JDVB0457802",
#         "JDVE04 615188 271069 100745",
#         "迪奥口组 lor造奥",
#         "10074578",
#         "迪奥口红",
#         "CCTV",
#         "吉量: POlICE 报质 新闻 号",
#         "+l 13",
#         "two jars of baby powder",
#         "口红",
#         "江苏省高邮市公安局治安大队副中队长谭紫钧",
#         "100块钱",
#         "30元左右",
#         "250块钱"
#       ],
#       "ann_valid_dranges": [
#         [
#           1,
#           30,
#           38
#         ],
#         [
#           2,
#           7,
#           15
#         ],
#         [
#           13,
#           33,
#           41
#         ],
#         [
#           16,
#           18,
#           26
#         ],
#         [
#           1,
#           100,
#           106
#         ],
#         [
#           2,
#           27,
#           31
#         ],
#         [
#           2,
#           85,
#           89
#         ],
#         [
#           2,
#           49,
#           53
#         ],
#         [
#           2,
#           76,
#           79
#         ],
#         [
#           2,
#           81,
#           84
#         ],
#         [
#           12,
#           52,
#           55
#         ],
#         [
#           13,
#           59,
#           62
#         ],
#         [
#           16,
#           161,
#           164
#         ],
#         [
#           16,
#           189,
#           192
#         ],
#         [
#           16,
#           249,
#           252
#         ],
#         [
#           16,
#           271,
#           274
#         ],
#         [
#           16,
#           288,
#           291
#         ],
#         [
#           16,
#           305,
#           308
#         ],
#         [
#           16,
#           660,
#           663
#         ],
#         [
#           2,
#           150,
#           153
#         ],
#         [
#           3,
#           11,
#           15
#         ],
#         [
#           4,
#           6,
#           10
#         ],
#         [
#           10,
#           11,
#           15
#         ],
#         [
#           3,
#           19,
#           23
#         ],
#         [
#           6,
#           9,
#           13
#         ],
#         [
#           10,
#           15,
#           19
#         ],
#         [
#           6,
#           26,
#           30
#         ],
#         [
#           9,
#           241,
#           245
#         ],
#         [
#           16,
#           144,
#           148
#         ],
#         [
#           6,
#           31,
#           37
#         ],
#         [
#           9,
#           117,
#           159
#         ],
#         [
#           9,
#           160,
#           216
#         ],
#         [
#           9,
#           217,
#           255
#         ],
#         [
#           0,
#           236,
#           238
#         ],
#         [
#           2,
#           142,
#           144
#         ],
#         [
#           3,
#           30,
#           32
#         ],
#         [
#           4,
#           53,
#           55
#         ],
#         [
#           9,
#           256,
#           258
#         ],
#         [
#           11,
#           38,
#           40
#         ],
#         [
#           12,
#           106,
#           108
#         ],
#         [
#           13,
#           167,
#           169
#         ],
#         [
#           14,
#           75,
#           77
#         ],
#         [
#           16,
#           153,
#           155
#         ],
#         [
#           18,
#           40,
#           42
#         ],
#         [
#           22,
#           10,
#           12
#         ],
#         [
#           24,
#           0,
#           2
#         ],
#         [
#           26,
#           3,
#           5
#         ],
#         [
#           27,
#           18,
#           20
#         ],
#         [
#           9,
#           62,
#           76
#         ],
#         [
#           1,
#           30,
#           37
#         ],
#         [
#           2,
#           7,
#           14
#         ],
#         [
#           10,
#           20,
#           27
#         ],
#         [
#           13,
#           33,
#           40
#         ],
#         [
#           16,
#           18,
#           25
#         ],
#         [
#           11,
#           18,
#           21
#         ],
#         [
#           11,
#           22,
#           25
#         ],
#         [
#           12,
#           50,
#           52
#         ],
#         [
#           13,
#           57,
#           59
#         ],
#         [
#           16,
#           131,
#           133
#         ],
#         [
#           16,
#           148,
#           150
#         ],
#         [
#           16,
#           180,
#           182
#         ],
#         [
#           16,
#           222,
#           224
#         ],
#         [
#           16,
#           279,
#           281
#         ],
#         [
#           16,
#           313,
#           315
#         ],
#         [
#           16,
#           554,
#           556
#         ],
#         [
#           16,
#           664,
#           666
#         ],
#         [
#           16,
#           881,
#           883
#         ],
#         [
#           1,
#           30,
#           32
#         ],
#         [
#           2,
#           7,
#           9
#         ],
#         [
#           10,
#           20,
#           22
#         ],
#         [
#           12,
#           20,
#           22
#         ],
#         [
#           12,
#           93,
#           95
#         ],
#         [
#           13,
#           33,
#           35
#         ],
#         [
#           16,
#           18,
#           20
#         ],
#         [
#           16,
#           104,
#           106
#         ],
#         [
#           12,
#           65,
#           82
#         ],
#         [
#           14,
#           14,
#           20
#         ],
#         [
#           14,
#           24,
#           30
#         ],
#         [
#           14,
#           42,
#           48
#         ],
#         [
#           13,
#           72,
#           85
#         ],
#         [
#           14,
#           49,
#           62
#         ],
#         [
#           21,
#           55,
#           68
#         ],
#         [
#           22,
#           28,
#           41
#         ],
#         [
#           23,
#           38,
#           51
#         ],
#         [
#           24,
#           75,
#           88
#         ],
#         [
#           25,
#           32,
#           45
#         ],
#         [
#           26,
#           57,
#           70
#         ],
#         [
#           27,
#           76,
#           89
#         ],
#         [
#           13,
#           72,
#           85
#         ],
#         [
#           14,
#           49,
#           62
#         ],
#         [
#           21,
#           55,
#           68
#         ],
#         [
#           22,
#           28,
#           41
#         ],
#         [
#           23,
#           38,
#           51
#         ],
#         [
#           24,
#           75,
#           88
#         ],
#         [
#           25,
#           32,
#           45
#         ],
#         [
#           26,
#           57,
#           70
#         ],
#         [
#           27,
#           76,
#           89
#         ],
#         [
#           13,
#           89,
#           92
#         ],
#         [
#           14,
#           66,
#           69
#         ],
#         [
#           21,
#           72,
#           75
#         ],
#         [
#           22,
#           45,
#           48
#         ],
#         [
#           23,
#           55,
#           58
#         ],
#         [
#           24,
#           92,
#           95
#         ],
#         [
#           25,
#           49,
#           52
#         ],
#         [
#           26,
#           74,
#           77
#         ],
#         [
#           27,
#           118,
#           121
#         ],
#         [
#           15,
#           25,
#           40
#         ],
#         [
#           16,
#           43,
#           48
#         ],
#         [
#           16,
#           131,
#           152
#         ],
#         [
#           16,
#           161,
#           176
#         ],
#         [
#           16,
#           176,
#           184
#         ],
#         [
#           16,
#           218,
#           226
#         ],
#         [
#           16,
#           189,
#           212
#         ],
#         [
#           16,
#           144,
#           152
#         ],
#         [
#           16,
#           338,
#           349
#         ],
#         [
#           16,
#           627,
#           654
#         ],
#         [
#           16,
#           554,
#           564
#         ],
#         [
#           16,
#           479,
#           487
#         ],
#         [
#           16,
#           148,
#           152
#         ],
#         [
#           16,
#           180,
#           184
#         ],
#         [
#           16,
#           222,
#           226
#         ],
#         [
#           0,
#           84,
#           88
#         ],
#         [
#           1,
#           44,
#           48
#         ],
#         [
#           2,
#           145,
#           149
#         ],
#         [
#           3,
#           25,
#           29
#         ],
#         [
#           4,
#           48,
#           52
#         ],
#         [
#           5,
#           43,
#           47
#         ],
#         [
#           6,
#           38,
#           42
#         ],
#         [
#           7,
#           25,
#           29
#         ],
#         [
#           8,
#           25,
#           29
#         ],
#         [
#           9,
#           117,
#           121
#         ],
#         [
#           10,
#           29,
#           33
#         ],
#         [
#           11,
#           29,
#           33
#         ],
#         [
#           12,
#           101,
#           105
#         ],
#         [
#           13,
#           113,
#           117
#         ],
#         [
#           14,
#           79,
#           83
#         ],
#         [
#           15,
#           56,
#           60
#         ],
#         [
#           16,
#           95,
#           99
#         ],
#         [
#           17,
#           29,
#           33
#         ],
#         [
#           18,
#           31,
#           35
#         ],
#         [
#           19,
#           34,
#           38
#         ],
#         [
#           20,
#           93,
#           97
#         ],
#         [
#           21,
#           93,
#           97
#         ],
#         [
#           22,
#           61,
#           65
#         ],
#         [
#           23,
#           68,
#           72
#         ],
#         [
#           24,
#           105,
#           109
#         ],
#         [
#           25,
#           65,
#           69
#         ],
#         [
#           26,
#           95,
#           99
#         ],
#         [
#           27,
#           109,
#           113
#         ],
#         [
#           18,
#           40,
#           58
#         ],
#         [
#           19,
#           11,
#           16
#         ],
#         [
#           13,
#           13,
#           15
#         ],
#         [
#           13,
#           171,
#           173
#         ],
#         [
#           16,
#           150,
#           152
#         ],
#         [
#           16,
#           182,
#           184
#         ],
#         [
#           16,
#           224,
#           226
#         ],
#         [
#           16,
#           531,
#           533
#         ],
#         [
#           16,
#           619,
#           621
#         ],
#         [
#           16,
#           622,
#           624
#         ],
#         [
#           16,
#           747,
#           749
#         ],
#         [
#           16,
#           950,
#           952
#         ],
#         [
#           21,
#           27,
#           29
#         ],
#         [
#           21,
#           85,
#           87
#         ],
#         [
#           13,
#           72,
#           92
#         ],
#         [
#           14,
#           49,
#           69
#         ],
#         [
#           21,
#           55,
#           75
#         ],
#         [
#           22,
#           28,
#           48
#         ],
#         [
#           23,
#           38,
#           58
#         ],
#         [
#           24,
#           75,
#           95
#         ],
#         [
#           25,
#           32,
#           52
#         ],
#         [
#           26,
#           57,
#           77
#         ],
#         [
#           25,
#           25,
#           30
#         ],
#         [
#           26,
#           50,
#           55
#         ],
#         [
#           27,
#           98,
#           103
#         ],
#         [
#           27,
#           38,
#           43
#         ]
#       ],
#       "ann_mspan2dranges": {
#         "同创化妆品专营店": [
#           [
#             1,
#             30,
#             38
#           ],
#           [
#             2,
#             7,
#             15
#           ],
#           [
#             13,
#             33,
#             41
#           ],
#           [
#             16,
#             18,
#             26
#           ]
#         ],
#         "创美妆专营店": [
#           [
#             1,
#             100,
#             106
#           ]
#         ],
#         "安徽合肥": [
#           [
#             2,
#             27,
#             31
#           ],
#           [
#             2,
#             85,
#             89
#           ]
#         ],
#         "汤姆福特": [
#           [
#             2,
#             49,
#             53
#           ]
#         ],
#         "阿玛尼": [
#           [
#             2,
#             76,
#             79
#           ]
#         ],
#         "香奈儿": [
#           [
#             2,
#             81,
#             84
#           ],
#           [
#             12,
#             52,
#             55
#           ],
#           [
#             13,
#             59,
#             62
#           ],
#           [
#             16,
#             161,
#             164
#           ],
#           [
#             16,
#             189,
#             192
#           ],
#           [
#             16,
#             249,
#             252
#           ],
#           [
#             16,
#             271,
#             274
#           ],
#           [
#             16,
#             288,
#             291
#           ],
#           [
#             16,
#             305,
#             308
#           ],
#           [
#             16,
#             660,
#             663
#           ]
#         ],
#         "科颜氏": [
#           [
#             2,
#             150,
#             153
#           ]
#         ],
#         "湖南长沙": [
#           [
#             3,
#             11,
#             15
#           ],
#           [
#             4,
#             6,
#             10
#           ],
#           [
#             10,
#             11,
#             15
#           ]
#         ],
#         "高邮警方": [
#           [
#             3,
#             19,
#             23
#           ],
#           [
#             6,
#             9,
#             13
#           ],
#           [
#             10,
#             15,
#             19
#           ]
#         ],
#         "Dior": [
#           [
#             6,
#             26,
#             30
#           ],
#           [
#             9,
#             241,
#             245
#           ],
#           [
#             16,
#             144,
#             148
#           ]
#         ],
#         "CHANEL": [
#           [
#             6,
#             31,
#             37
#           ]
#         ],
#         "CCTV co COULEUR COUTURE HYDFATING LIP BALM": [
#           [
#             9,
#             117,
#             159
#           ]
#         ],
#         "COLORAWAKENING AfrlenQ BAUME A LEVRES ROUGE SOIN FONDANT": [
#           [
#             9,
#             160,
#             216
#           ]
#         ],
#         "REHAUSSEUR DE FEEL GOOD Dior HYDRATANT": [
#           [
#             9,
#             217,
#             255
#           ]
#         ],
#         "吉量": [
#           [
#             0,
#             236,
#             238
#           ],
#           [
#             2,
#             142,
#             144
#           ],
#           [
#             3,
#             30,
#             32
#           ],
#           [
#             4,
#             53,
#             55
#           ],
#           [
#             9,
#             256,
#             258
#           ],
#           [
#             11,
#             38,
#             40
#           ],
#           [
#             12,
#             106,
#             108
#           ],
#           [
#             13,
#             167,
#             169
#           ],
#           [
#             14,
#             75,
#             77
#           ],
#           [
#             16,
#             153,
#             155
#           ],
#           [
#             18,
#             40,
#             42
#           ],
#           [
#             22,
#             10,
#             12
#           ],
#           [
#             24,
#             0,
#             2
#           ],
#           [
#             26,
#             3,
#             5
#           ],
#           [
#             27,
#             18,
#             20
#           ]
#         ],
#         "江苏省高邮市公安局武安派出所": [
#           [
#             9,
#             62,
#             76
#           ]
#         ],
#         "同创化妆品专营": [
#           [
#             1,
#             30,
#             37
#           ],
#           [
#             2,
#             7,
#             14
#           ],
#           [
#             10,
#             20,
#             27
#           ],
#           [
#             13,
#             33,
#             40
#           ],
#           [
#             16,
#             18,
#             25
#           ]
#         ],
#         "高某某": [
#           [
#             11,
#             18,
#             21
#           ]
#         ],
#         "徐某华": [
#           [
#             11,
#             22,
#             25
#           ]
#         ],
#         "迪奥": [
#           [
#             12,
#             50,
#             52
#           ],
#           [
#             13,
#             57,
#             59
#           ],
#           [
#             16,
#             131,
#             133
#           ],
#           [
#             16,
#             148,
#             150
#           ],
#           [
#             16,
#             180,
#             182
#           ],
#           [
#             16,
#             222,
#             224
#           ],
#           [
#             16,
#             279,
#             281
#           ],
#           [
#             16,
#             313,
#             315
#           ],
#           [
#             16,
#             554,
#             556
#           ],
#           [
#             16,
#             664,
#             666
#           ],
#           [
#             16,
#             881,
#             883
#           ]
#         ],
#         "同创": [
#           [
#             1,
#             30,
#             32
#           ],
#           [
#             2,
#             7,
#             9
#           ],
#           [
#             10,
#             20,
#             22
#           ],
#           [
#             12,
#             20,
#             22
#           ],
#           [
#             12,
#             93,
#             95
#           ],
#           [
#             13,
#             33,
#             35
#           ],
#           [
#             16,
#             18,
#             20
#           ],
#           [
#             16,
#             104,
#             106
#           ]
#         ],
#         "T苏省京邮市公安居治安士刚可中队长": [
#           [
#             12,
#             65,
#             82
#           ]
#         ],
#         "800余万元": [
#           [
#             14,
#             14,
#             20
#           ]
#         ],
#         "600余万元": [
#           [
#             14,
#             24,
#             30
#           ]
#         ],
#         "1800余万": [
#           [
#             14,
#             42,
#             48
#           ]
#         ],
#         "江苏省高邮市公安局治安大队": [
#           [
#             13,
#             72,
#             85
#           ],
#           [
#             14,
#             49,
#             62
#           ],
#           [
#             21,
#             55,
#             68
#           ],
#           [
#             22,
#             28,
#             41
#           ],
#           [
#             23,
#             38,
#             51
#           ],
#           [
#             24,
#             75,
#             88
#           ],
#           [
#             25,
#             32,
#             45
#           ],
#           [
#             26,
#             57,
#             70
#           ],
#           [
#             27,
#             76,
#             89
#           ],
#           [
#             13,
#             72,
#             85
#           ],
#           [
#             14,
#             49,
#             62
#           ],
#           [
#             21,
#             55,
#             68
#           ],
#           [
#             22,
#             28,
#             41
#           ],
#           [
#             23,
#             38,
#             51
#           ],
#           [
#             24,
#             75,
#             88
#           ],
#           [
#             25,
#             32,
#             45
#           ],
#           [
#             26,
#             57,
#             70
#           ],
#           [
#             27,
#             76,
#             89
#           ]
#         ],
#         "谭紫钧": [
#           [
#             13,
#             89,
#             92
#           ],
#           [
#             14,
#             66,
#             69
#           ],
#           [
#             21,
#             72,
#             75
#           ],
#           [
#             22,
#             45,
#             48
#           ],
#           [
#             23,
#             55,
#             58
#           ],
#           [
#             24,
#             92,
#             95
#           ],
#           [
#             25,
#             49,
#             52
#           ],
#           [
#             26,
#             74,
#             77
#           ],
#           [
#             27,
#             118,
#             121
#           ]
#         ],
#         "2020年三月至2020年八月": [
#           [
#             15,
#             25,
#             40
#           ]
#         ],
#         "600万元": [
#           [
#             16,
#             43,
#             48
#           ]
#         ],
#         "迪奥(D1c新 专柜正品】Dior迪奥口红": [
#           [
#             16,
#             131,
#             152
#           ]
#         ],
#         "香奈儿/Chan 车 柜正品】": [
#           [
#             16,
#             161,
#             176
#           ]
#         ],
#         "Dlor迪奥口红": [
#           [
#             16,
#             176,
#             184
#           ],
#           [
#             16,
#             218,
#             226
#           ]
#         ],
#         "香奈儿/Cha SF1074557757474": [
#           [
#             16,
#             189,
#             212
#           ]
#         ],
#         "Dior迪奥口红": [
#           [
#             16,
#             144,
#             152
#           ]
#         ],
#         "JDVB0457802": [
#           [
#             16,
#             338,
#             349
#           ]
#         ],
#         "JDVE04 615188 271069 100745": [
#           [
#             16,
#             627,
#             654
#           ]
#         ],
#         "迪奥口组 lor造奥": [
#           [
#             16,
#             554,
#             564
#           ]
#         ],
#         "10074578": [
#           [
#             16,
#             479,
#             487
#           ]
#         ],
#         "迪奥口红": [
#           [
#             16,
#             148,
#             152
#           ],
#           [
#             16,
#             180,
#             184
#           ],
#           [
#             16,
#             222,
#             226
#           ]
#         ],
#         "CCTV": [
#           [
#             0,
#             84,
#             88
#           ],
#           [
#             1,
#             44,
#             48
#           ],
#           [
#             2,
#             145,
#             149
#           ],
#           [
#             3,
#             25,
#             29
#           ],
#           [
#             4,
#             48,
#             52
#           ],
#           [
#             5,
#             43,
#             47
#           ],
#           [
#             6,
#             38,
#             42
#           ],
#           [
#             7,
#             25,
#             29
#           ],
#           [
#             8,
#             25,
#             29
#           ],
#           [
#             9,
#             117,
#             121
#           ],
#           [
#             10,
#             29,
#             33
#           ],
#           [
#             11,
#             29,
#             33
#           ],
#           [
#             12,
#             101,
#             105
#           ],
#           [
#             13,
#             113,
#             117
#           ],
#           [
#             14,
#             79,
#             83
#           ],
#           [
#             15,
#             56,
#             60
#           ],
#           [
#             16,
#             95,
#             99
#           ],
#           [
#             17,
#             29,
#             33
#           ],
#           [
#             18,
#             31,
#             35
#           ],
#           [
#             19,
#             34,
#             38
#           ],
#           [
#             20,
#             93,
#             97
#           ],
#           [
#             21,
#             93,
#             97
#           ],
#           [
#             22,
#             61,
#             65
#           ],
#           [
#             23,
#             68,
#             72
#           ],
#           [
#             24,
#             105,
#             109
#           ],
#           [
#             25,
#             65,
#             69
#           ],
#           [
#             26,
#             95,
#             99
#           ],
#           [
#             27,
#             109,
#             113
#           ]
#         ],
#         "吉量: POlICE 报质 新闻 号": [
#           [
#             18,
#             40,
#             58
#           ]
#         ],
#         "+l 13": [
#           [
#             19,
#             11,
#             16
#           ]
#         ],
#         "口红": [
#           [
#             13,
#             13,
#             15
#           ],
#           [
#             13,
#             171,
#             173
#           ],
#           [
#             16,
#             150,
#             152
#           ],
#           [
#             16,
#             182,
#             184
#           ],
#           [
#             16,
#             224,
#             226
#           ],
#           [
#             16,
#             531,
#             533
#           ],
#           [
#             16,
#             619,
#             621
#           ],
#           [
#             16,
#             622,
#             624
#           ],
#           [
#             16,
#             747,
#             749
#           ],
#           [
#             16,
#             950,
#             952
#           ],
#           [
#             21,
#             27,
#             29
#           ],
#           [
#             21,
#             85,
#             87
#           ]
#         ],
#         "江苏省高邮市公安局治安大队副中队长谭紫钧": [
#           [
#             13,
#             72,
#             92
#           ],
#           [
#             14,
#             49,
#             69
#           ],
#           [
#             21,
#             55,
#             75
#           ],
#           [
#             22,
#             28,
#             48
#           ],
#           [
#             23,
#             38,
#             58
#           ],
#           [
#             24,
#             75,
#             95
#           ],
#           [
#             25,
#             32,
#             52
#           ],
#           [
#             26,
#             57,
#             77
#           ]
#         ],
#         "100块钱": [
#           [
#             25,
#             25,
#             30
#           ]
#         ],
#         "30元左右": [
#           [
#             26,
#             50,
#             55
#           ],
#           [
#             27,
#             98,
#             103
#           ]
#         ],
#         "250块钱": [
#           [
#             27,
#             38,
#             43
#           ]
#         ]
#       },
#       "ann_mspan2guess_field": {
#         "同创化妆品专营店": "INVOLVED_COMPANY",
#         "创美妆专营店": "INVOLVED_COMPANY",
#         "安徽合肥": "LOCATION",
#         "汤姆福特": "PRODUCT_BRAND",
#         "阿玛尼": "PRODUCT_BRAND",
#         "香奈儿": "PRODUCT_BRAND",
#         "科颜氏": "PRODUCT_BRAND",
#         "湖南长沙": "LOCATION",
#         "高邮警方": "REGULATORY_ORG",
#         "Dior": "PRODUCT_BRAND",
#         "CHANEL": "PRODUCT_BRAND",
#         "CCTV co COULEUR COUTURE HYDFATING LIP BALM": "PRODUCT_NAME",
#         "COLORAWAKENING AfrlenQ BAUME A LEVRES ROUGE SOIN FONDANT": "PRODUCT_NAME",
#         "REHAUSSEUR DE FEEL GOOD Dior HYDRATANT": "PRODUCT_NAME",
#         "吉量": "PRODUCT_BRAND",
#         "江苏省高邮市公安局武安派出所": "REGULATORY_ORG",
#         "同创化妆品专营": "INVOLVED_COMPANY",
#         "高某某": "INVOLVED_COMPANY",
#         "徐某华": "INVOLVED_COMPANY",
#         "迪奥": "PRODUCT_BRAND",
#         "同创": "INVOLVED_COMPANY",
#         "T苏省京邮市公安居治安士刚可中队长": "REGULATORY_ORG",
#         "800余万元": "AMOUNT",
#         "600余万元": "AMOUNT",
#         "1800余万": "AMOUNT",
#         "江苏省高邮市公安局治安大队": "LOCATION",
#         "谭紫钧": "INVOLVED_COMPANY",
#         "2020年三月至2020年八月": "TIME",
#         "600万元": "AMOUNT",
#         "迪奥(D1c新 专柜正品】Dior迪奥口红": "PRODUCT_NAME",
#         "香奈儿/Chan 车 柜正品】": "PRODUCT_BRAND",
#         "Dlor迪奥口红": "PRODUCT_NAME",
#         "香奈儿/Cha SF1074557757474": "PRODUCT_BRAND",
#         "Dior迪奥口红": "PRODUCT_NAME",
#         "JDVB0457802": "PRODUCT_NAME",
#         "JDVE04 615188 271069 100745": "PRODUCT_NAME",
#         "迪奥口组 lor造奥": "PRODUCT_NAME",
#         "10074578": "PRODUCT_NAME",
#         "迪奥口红": "PRODUCT_NAME",
#         "CCTV": "REGULATORY_ORG",
#         "吉量: POlICE 报质 新闻 号": "REGULATORY_ORG",
#         "+l 13": "INVOLVED_COMPANY",
#         "口红": "PRODUCT_NAME",
#         "江苏省高邮市公安局治安大队副中队长谭紫钧": "REGULATORY_ORG",
#         "100块钱": "AMOUNT",
#         "30元左右": "AMOUNT",
#         "250块钱": "AMOUNT"
#       }
#     }
#   ],"""


"""
CO Counterfeiting 时间，地点，涉及金额，监管机构，产品名称，产品品牌，涉事企业，以及伪造数量。这些实体的英文标注分别为：TIME, LOCATION, AMOUNT, REGULATORY_ORG, PRODUCT_NAME, PRODUCT_BRAND, INVOLVED_COMPANY
FA False_Advertising 时间，地点，涉及金额，监管机构，产品名称，产品品牌，涉事企业。英文标注为：TIME, LOCATION, AMOUNT, REGULATORY_ORG, PRODUCT_NAME, PRODUCT_BRAND, INVOLVED_COMPANY
"""
prompt_head = """
你是一个优秀的NLP工作者，现在需要完成对多段文字以及其中包含实体的理解，最终输出这个文章中包含哪些事件的文档级事件抽取任务，接下来我会给你一个示例以及我需要进行检测的文本！
接下来输入的文本的事件类型为：False_Advertising。
这个事件包含的论元有：时间，地点，涉及金额，监管机构，产品名称，产品品牌，涉事企业。英文标注为：TIME, LOCATION, AMOUNT, REGULATORY_ORG, PRODUCT_NAME, PRODUCT_BRAND, INVOLVED_COMPANY。输出的结果应严格限定于这些类型
我要求只输出"recguid_eventname_eventdict_list": []
"""
# response = client.chat.completions.create(
#     model="glm-4",  # 填写需要调用的模型名称
#     messages=[
#         {"role": "user", "content": str(prompt_head)},
#         {"role": "assistant", "content": "当然，我会仔细的理解示例和文本，并以合适的格式给出检测结果。"},
#         {"role": "user", "content": "这是一个示例：" + str(sample_input) + "我需要你在接下来的任务中只输出recguid_eventname_eventdict_list： []的内容"},
#         {"role": "assistant", "content": "是的我明白，在输入接下来需要检测的语句后，我只会输出正确的recguid_eventname_eventdict_list： []，并严格符合你的要求。" + str(sample_output)},
#         {"role": "user", "content": "很好，这是下一个需要做识别的语句：" + str(text) + "请注意，你的输出结果我会用于直接保存为json文件，所以不要输出没必要的文字，只需要输出recguid_eventname_eventdict_list： []的格式与其中的内容，不要输出其他任何内容。且 文本中可能包含多个事件，需要参考示例输出，如果你认为只有一个事件，那就只输出一个"}
#     ],
# )
#
# print(response.choices[0].message.content)

def read_json_file(file_path):
    """读取JSON文件并返回数据"""
    with open(file_path, 'r', encoding='utf-8') as file:
        data = json.load(file)
    return data

def write_json_file(data, file_path):
    """将数据写入JSON文件"""
    with open(file_path, 'w', encoding='utf-8') as file:
        json.dump(data, file, ensure_ascii=False, indent=4)
def extract_events_from_text(text, api_key, model="glm-4"):
    """调用API提取事件并返回结果"""
    client = ZhipuAI(api_key=api_key)
    response = client.chat.completions.create(
        model=model,  # 填写需要调用的模型名称
        messages=[
            {"role": "user", "content": str(prompt_head)},
            {"role": "assistant", "content": "当然，我会仔细的理解示例和文本，并以合适的格式给出检测结果。"},
            {"role": "user", "content": "这是一个示例：" + str(sample_input) + "我需要你在接下来的任务中只输出recguid_eventname_eventdict_list： []的内容"},
            {"role": "assistant", "content": "是的我明白，在输入接下来需要检测的语句后，我只会输出正确的recguid_eventname_eventdict_list： []，并严格符合你的要求。" + str(sample_output)},
            {"role": "user", "content": "很好，这是下一个需要做识别的语句：" + str(text) + "请注意，你的输出结果我会用于直接保存为json文件，所以不要输出没必要的文字，只需要输出recguid_eventname_eventdict_list： []的格式与其中的内容，不要输出其他任何内容。且 文本中可能包含多个事件，需要参考示例输出，如果你认为只有一个事件，那就只输出一个"}
        ],
    )
    return response.choices[0].message.content
def clean_api_response(response):
    """清理API返回的结果，去除非JSON内容"""
    try:
        start_index = response.index('[')
        end_index = response.rindex(']') + 1
        clean_response = response[start_index:end_index]
        return clean_response
    except ValueError:
        raise ValueError("API返回的结果中没有找到JSON数组")


def update_json_with_events(data, api_key):
    """检查并补充recguid_eventname_eventdict_list内容"""
    updated_data = []
    for entry in tqdm(data, desc="Processing entries"):
        if isinstance(entry, list) and len(entry) > 1 and isinstance(entry[1], dict):
            if "recguid_eventname_eventdict_list" not in entry[1]:
                text = json.dumps(entry[1], ensure_ascii=False)  # 确保文本为中文
                try:
                    result = extract_events_from_text(text, api_key)
                    clean_result = clean_api_response(result)  # 清理API返回的结果
                    entry[1]["recguid_eventname_eventdict_list"] = json.loads(clean_result)
                except Exception as e:
                    print(f"处理entry时出错: {e}")
                    continue  # 跳过出错的entry
            updated_data.append(entry)  # 将处理成功和已存在字段的entry都加入更新后的数据中
    return updated_data


def main(input_json_path, output_json_path, api_key):
    data = read_json_file(input_json_path)
    updated_data = update_json_with_events(data, api_key)
    write_json_file(updated_data, output_json_path)
    print("结果已保存到", output_json_path)

if __name__ == "__main__":
    input_json_path = "E:\\bishe\MNER\HZPGIM\FA\converted_data.json"  # 输入JSON文件路径
    output_json_path = "E:\\bishe\MNER\HZPGIM\FA\\update.json"  # 输出JSON文件路径
    api_key = "1d47eabd48f537cb361452dc3669893d.meA60atHPB44tsPs"  # 替换为你的API密钥
    main(input_json_path, output_json_path, api_key)